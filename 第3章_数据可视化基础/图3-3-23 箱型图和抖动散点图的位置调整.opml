<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图3-3-23 箱型图和抖动散点图的位置调整&#10;" _note="import pandas as pd&#10;import numpy as np&#10;from plotnine import *&#10;# from plotnine.data import *&#10;import matplotlib.pyplot as plt&#10;&#10;N = 100&#10;df = pd.DataFrame(dict(group=np.repeat([1, 2], N*2),&#10;                       y=np.append(np.append(np.random.normal(5, 1, N), np.random.normal(2, 1, N)),&#10;                                   np.append(np.random.normal(1, 1, N), np.random.normal(3, 1, N))),&#10;                       x=np.tile([&quot;A&quot;, &quot;B&quot;, &quot;A&quot;, &quot;B&quot;], N)))&#10;df&#10;&#10;```&#10;```&#10;     group         y  x&#10;0        1  5.180358  A&#10;1        1  2.704987  B&#10;2        1  4.857574  A&#10;3        1  4.672052  B&#10;4        1  6.047078  A&#10;..     ...       ... ..&#10;395      2  0.731346  B&#10;396      2  2.683399  A&#10;397      2  3.979204  B&#10;398      2  3.353296  A&#10;399      2  3.607637  B&#10;&#10;[400 rows x 3 columns]&#10;```&#10;&#10;```python&#10;# ------------------------------------(a)# 未调整箱型图和抖动散点图的间距--------------------&#10;base_plot = (ggplot(df, aes(x='x', y='y', fill='factor(group)'))&#10;             + geom_boxplot(outlier_size=0, colour='k')&#10;             + geom_jitter(aes(group='factor(group)'),&#10;                           shape='o', alpha=0.5)&#10;             + scale_fill_manual(values=(&quot;# F8766D&quot;, &quot;# 00BFC4&quot;),&#10;                                 guide=guide_legend(title='Group'))&#10;             + theme_matplotlib()&#10;             + theme(&#10;    # text=element_text(size=15,face=&quot;plain&quot;,color=&quot;black&quot;),&#10;    axis_title=element_text(size=18, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    axis_text=element_text(size=16, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    legend_position=(0.8, 0.8),&#10;    aspect_ratio=1.05,&#10;    figure_size=(5, 5),&#10;    dpi=100&#10;)&#10;)&#10;&#10;print(base_plot)&#10;# base_plot.save('位置调整1.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x538.907 with 1 Axes&amp;gt;&#10;```&#10;&#10;```python&#10;# ------------------------------(b)# 调整抖动散点图的间距----------------------------------&#10;base_plot = (ggplot(df, aes(x='x', y='y', fill='factor(group)'))&#10;             + geom_boxplot(outlier_size=0, colour='k')&#10;             + geom_jitter(aes(group='factor(group)'),&#10;                           shape='o', alpha=0.5, position=position_jitterdodge())&#10;             + scale_fill_manual(values=(&quot;# F8766D&quot;, &quot;# 00BFC4&quot;),&#10;                                 guide=guide_legend(title='Group'))&#10;             + theme_matplotlib()&#10;             + theme(&#10;    # text=element_text(size=15,face=&quot;plain&quot;,color=&quot;black&quot;),&#10;    axis_title=element_text(size=18, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    axis_text=element_text(size=16, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    legend_position=(0.8, 0.8),&#10;    aspect_ratio=1.05,&#10;    figure_size=(5, 5),&#10;    dpi=100&#10;)&#10;)&#10;&#10;print(base_plot)&#10;# base_plot.save('位置调整2.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x538.907 with 1 Axes&amp;gt;&#10;```&#10;&#10;```python&#10;# -----------------------------(c)# 同时调整箱型图和抖动散点图的间距-----------------------&#10;base_plot = (ggplot(df, aes(x='x', y='y', fill='factor(group)'))&#10;             + geom_boxplot(position=position_dodge(0.85),&#10;                            outlier_size=0, colour='k')&#10;             + geom_jitter(aes(group='factor(group)'),&#10;                           shape='o', alpha=0.5,&#10;                           position=position_jitterdodge(dodge_width=0.85))&#10;             + scale_fill_manual(values=(&quot;# F8766D&quot;, &quot;# 00BFC4&quot;),&#10;                                 guide=guide_legend(title='Group'))&#10;             + theme_matplotlib()&#10;             + theme(&#10;    # text=element_text(size=15,face=&quot;plain&quot;,color=&quot;black&quot;),&#10;    axis_title=element_text(size=18, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    axis_text=element_text(size=16, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    legend_position=(0.8, 0.8),&#10;    aspect_ratio=1.05,&#10;    figure_size=(5, 5),&#10;    dpi=100&#10;)&#10;)&#10;&#10;print(base_plot)&#10;# base_plot.save('位置调整3.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x538.907 with 1 Axes&amp;gt;&#10;```&#10;&#10;" />
  </outline>
  </body>
</opml>