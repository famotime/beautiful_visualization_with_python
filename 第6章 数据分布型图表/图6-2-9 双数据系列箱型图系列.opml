<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图6-2-9 双数据系列箱型图系列&#10;" _note="import pandas as pd&#10;import numpy as np&#10;import seaborn as sns&#10;import matplotlib.pyplot as plt&#10;from plotnine import *&#10;&#10;&#10;tips = sns.load_dataset(&quot;tips&quot;)&#10;# tips.to_csv('tips.csv', index=False, header=True)&#10;tips&#10;&#10;```&#10;```&#10;     total_bill   tip     sex smoker   day    time  size&#10;0         16.99  1.01  Female     No   Sun  Dinner     2&#10;1         10.34  1.66    Male     No   Sun  Dinner     3&#10;2         21.01  3.50    Male     No   Sun  Dinner     3&#10;3         23.68  3.31    Male     No   Sun  Dinner     2&#10;4         24.59  3.61  Female     No   Sun  Dinner     4&#10;..          ...   ...     ...    ...   ...     ...   ...&#10;239       29.03  5.92    Male     No   Sat  Dinner     3&#10;240       27.18  2.00  Female    Yes   Sat  Dinner     2&#10;241       22.67  2.00    Male    Yes   Sat  Dinner     2&#10;242       17.82  1.75    Male     No   Sat  Dinner     2&#10;243       18.78  3.00  Female     No  Thur  Dinner     2&#10;&#10;[244 rows x 7 columns]&#10;```&#10;">
    <outline text="(a) 多数据系列的箱型图&#10;" _note="box2_plot = (ggplot(tips, aes(x=&quot;day&quot;, y=&quot;total_bill&quot;))&#10;             + geom_boxplot(aes(fill=&quot;sex&quot;),&#10;                            position=position_dodge(0.8), size=0.5)&#10;             + guides(fill=guide_legend(title=&quot;Gender&quot;))&#10;             + scale_fill_hue(s=0.90, l=0.65, h=0.0417, color_space='husl')&#10;             + theme_matplotlib()&#10;             + theme(legend_position='right',&#10;                     text=element_text(size=12, colour=&quot;black&quot;),&#10;                     aspect_ratio=1.01,&#10;                     dpi=100,&#10;                     figure_size=(4, 4)))&#10;print(box2_plot)&#10;# box2_plot.save(&quot;box2_plot.pdf&quot;)&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 400x414.702 with 1 Axes&amp;gt;&#10;```&#10;&#10;```python&#10;# ------------------------------------(b) 带抖动散点的多数据系列箱型图.----------------------&#10;x_label = ['Thur', 'Fri', 'Sat', 'Sun']&#10;tips['x1'] = pd.factorize(tips['day'], sort=x_label)[0]+1&#10;tips['x2'] = tips.apply(lambda x: x['x1']-0.2 if x['sex']&#10;                        == &quot;Male&quot; else x['x1']+0.2, axis=1)&#10;&#10;box2_plot = (ggplot(tips, aes(x=&quot;x1&quot;, y=&quot;total_bill&quot;, group=&quot;x2&quot;, fill=&quot;sex&quot;))&#10;             + geom_boxplot(position=position_dodge(0.8),&#10;                            size=0.5, outlier_size=0.001)&#10;             + geom_jitter(aes(x=&quot;x2&quot;), position=position_jitter(width=0.15),&#10;                           shape=&quot;o&quot;, size=2, stroke=0.1)&#10;             + guides(fill=guide_legend(title=&quot;Gender&quot;))&#10;             + scale_fill_hue(s=0.90, l=0.65, h=0.0417, color_space='husl')&#10;             + scale_x_continuous(breaks=range(1, len(x_label)+1),&#10;                                  labels=x_label, name='day')&#10;             + xlab(&quot;day&quot;)&#10;             + theme_matplotlib()&#10;             + theme(legend_position='right',&#10;                     text=element_text(size=12, colour=&quot;black&quot;),&#10;                     aspect_ratio=1.01,&#10;                     dpi=100,&#10;                     figure_size=(4, 4)))&#10;print(box2_plot)&#10;# box2_plot.save(&quot;box2_plot2.pdf&quot;)&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 400x414.702 with 1 Axes&amp;gt;&#10;```&#10;&#10;```python&#10;# ---------------------------------- (c) 带抖动散点的多数据系列小提琴图-----------------------------&#10;sns.set_style(&quot;ticks&quot;)&#10;&#10;fig = plt.figure(figsize=(5, 5.5))&#10;violinplot = sns.violinplot(x=&quot;day&quot;, y=&quot;total_bill&quot;, hue=&quot;sex&quot;,&#10;                            data=tips, inner=&quot;quartile&quot;, split=True,&#10;                            linewidth=1, colors=[&quot;# F7746A&quot;, &quot;# 36ACAE&quot;])&#10;# violinplot.despine(left=True)&#10;plt.legend(loc=&quot;center right&quot;,&#10;           bbox_to_anchor=(1.5, 0, 0, 1))&#10;# violinplot.set_axis_labels(&quot;day&quot;, &quot;total bill&quot;)&#10;# inner：控制violinplot内部数据点的表示，&#10;# 有“box”, “quartile”, “point”, “stick”四种方式。&#10;# fig.savefig('violinplot_split2.pdf')&#10;&#10;# ----------------------------------(d) 多数据系列的豆状图-----------------------------&#10;# flatui = [&quot;# F7746A&quot;, &quot;# 36ACAE&quot;, &quot;# 95a5a6&quot;, &quot;# e74c3c&quot;, &quot;# 34495e&quot;, &quot;# 2ecc71&quot;]&#10;# sns.set_palette(sns.hls_palette(2, s = 0.95, l = 0.5, h=0.0417))&#10;sns.set_context(&quot;notebook&quot;, font_scale=1.5,&#10;                rc={'font.size': 12, 'axes.labelsize': 20, 'legend.fontsize': 15,&#10;                    'xtick.labelsize': 15, 'ytick.labelsize': 15})&#10;&#10;fig = plt.figure(figsize=(5, 5.5))&#10;violinplot = sns.violinplot(x=&quot;day&quot;, y=&quot;total_bill&quot;, hue=&quot;sex&quot;,&#10;                            data=tips, inner=&quot;box&quot;, split=True,&#10;                            linewidth=1, palette=[&quot;# F7746A&quot;, &quot;# 36ACAE&quot;])&#10;plt.legend(loc=&quot;center right&quot;,&#10;           bbox_to_anchor=(1.5, 0, 0, 1))&#10;&#10;# plt.savefig('violinplot_split.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;matplotlib.legend.Legend at 0x28586fef0a0&amp;gt;&#10;```&#10;&#10;" />
    </outline>
  </outline>
  </body>
</opml>