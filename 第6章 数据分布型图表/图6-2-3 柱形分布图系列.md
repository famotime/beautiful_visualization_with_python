# 图6-2-3 柱形分布图系列

```python
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
from plotnine import *


df = pd.read_csv('Distribution_Data.csv')
df['class'] = pd.Categorical(df['class'], categories=["n", "s", "k", "mm"], ordered=True)
df

```
```
    class     value
0       n  3.918358
1       n  2.556974
2       n  5.834538
3       n  2.255196
4       n  4.443104
..    ...       ...
395    mm  3.352823
396    mm  3.571257
397    mm  3.932318
398    mm  4.335818
399    mm  3.704272

[400 rows x 2 columns]
```
## (a)带误差线的柱形图

```python
Barjitter_plot = (ggplot(df, aes(x='class', y="value", fill="class"))
                  + stat_summary(fun_data="mean_sdl", fun_args={'mult': 1},
                                 geom="bar", color="black", size=0.75, width=0.7, show_legend=False)
                  + stat_summary(fun_data="mean_sdl", fun_args={'mult': 1},
                                 geom="errorbar", color="black", size=0.75, width=.2, show_legend=False)
                  + scale_fill_hue(s=0.90, l=0.65, h=0.0417,
                                   color_space='husl')
                  + ylim(0, 7)
                  + theme_matplotlib()
                  + theme(  # legend_position='none',
    aspect_ratio=1.05,
    dpi=100,
    figure_size=(4, 4)))
print(Barjitter_plot)
# Barjitter_plot.save("Barjitter_plot.pdf")

```
```
C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:372: PlotnineWarning: stat_summary : Removed 2 rows containing non-finite values.
C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:372: PlotnineWarning: stat_summary : Removed 2 rows containing non-finite values.

```
## (b)带误差线柱形与抖动图

```python
Barjitter_plot = (ggplot(df, aes(x='class', y="value", fill="class"))
                  + stat_summary(fun_data="mean_sdl", fun_args={'mult': 1},
                                 geom="bar", fill="w", color="black", size=0.75, width=0.7, show_legend=False)
                  + stat_summary(fun_data="mean_sdl", fun_args={'mult': 1},
                                 geom="errorbar", color="black", size=0.75, width=.2, show_legend=False)
                  + geom_jitter(width=0.3, size=2, stroke=0.1,
                                shape='o', show_legend=False)
                  + scale_fill_hue(s=0.90, l=0.65, h=0.0417,
                                   color_space='husl')
                  + ylim(0, 7)
                  + theme_matplotlib()
                  + theme(  # legend_position='none',
    aspect_ratio=1.05,
    dpi=100,
    figure_size=(4, 4)))
print(Barjitter_plot)
# Barjitter_plot.save("Barjitter_plot2.pdf")

```
```
C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:372: PlotnineWarning: stat_summary : Removed 2 rows containing non-finite values.
C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:372: PlotnineWarning: stat_summary : Removed 2 rows containing non-finite values.
C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:467: PlotnineWarning: geom_jitter : Removed 3 rows containing missing values.

```
