<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图6-3-4 统计分布组合图&#10;" _note="from scipy import stats&#10;import pandas as pd&#10;import numpy as np&#10;import seaborn as sns&#10;import matplotlib.pyplot as plt&#10;from plotnine import *&#10;&#10;sns.set_style(&quot;ticks&quot;)&#10;sns.set_context(&quot;notebook&quot;, font_scale=1.5,&#10;                rc={'font.size': 13,&#10;                    'axes.labelsize': 16, 'legend.fontsize': 16,&#10;                    'xtick.labelsize': 15, 'ytick.labelsize': 15})&#10;                    &#10;# N = 300&#10;# x1 = np.random.normal(1.5, 0.5,N)&#10;# y1 =  np.random.normal(2,0.2, N)&#10;# df=pd.DataFrame({'x':x1,'y':y1})&#10;&#10;tips = sns.load_dataset(&quot;tips&quot;)&#10;df = pd.DataFrame({'x': tips['total_bill'], 'y': tips['tip']})&#10;df&#10;&#10;```&#10;```&#10;         x     y&#10;0    16.99  1.01&#10;1    10.34  1.66&#10;2    21.01  3.50&#10;3    23.68  3.31&#10;4    24.59  3.61&#10;..     ...   ...&#10;239  29.03  5.92&#10;240  27.18  2.00&#10;241  22.67  2.00&#10;242  17.82  1.75&#10;243  18.78  3.00&#10;&#10;[244 rows x 2 columns]&#10;```&#10;">
    <outline text="(a) 二维散点与统计直方图&#10;" _note="sns_hist = sns.jointplot(x='x', y='y',  # 设置xy轴，显示columns名称&#10;                         data=df,   # 设置数据&#10;                         color='# D31A8A',   # 设置颜色&#10;                         s=60, edgecolor=&quot;w&quot;, linewidth=0.5,&#10;                         # 设置散点大小、边缘线颜色及宽度(只针对scatter）&#10;                         kind='scatter',  # kind=&quot;kde&quot;,&quot;hex&quot;,&quot;reg&quot;&#10;                         space=0,  # 设置散点图和布局图的间距&#10;                         size=5, ratio=5,  # 散点图与布局图高度比，整型&#10;                         xlim=(0, 60),&#10;                         marginal_kws=dict(bins=20, rug=False,&#10;                                           hist_kws={'edgecolor': 'k',&#10;                                                     'color': '# 7CBC47',&#10;                                                     'alpha': 1})  # 设置柱状图箱数，是否设置rug&#10;                         )&#10;&#10;sns_hist.set_axis_labels(xlabel='total bill', ylabel='tip')&#10;&#10;# sns_hist.savefig('scatter_hist.pdf')&#10;&#10;```&#10;```&#10;C:\QMDownload\anaconda\lib\site-packages\seaborn\axisgrid.py:2264: UserWarning: The `size` parameter has been renamed to `height`; please update your code.&#10;&#10;```&#10;" />
    <outline text="(b) 带趋势线的二维散点与统计直方图&#10;" _note="sns_reg = sns.jointplot(x='x', y='y',  # 设置xy轴，显示columns名称&#10;                        data=df,   # 设置数据&#10;                        color='# 7CBC47',   # 设置颜色&#10;                        # 设置散点大小、边缘线颜色及宽度(只针对scatter）&#10;                        kind='reg',  # kind=&quot;kde&quot;,&quot;hex&quot;,&quot;reg&quot;&#10;                        space=0,  # 设置散点图和布局图的间距&#10;                        size=5, ratio=5,  # 散点图与布局图高度比，整型&#10;                        scatter_kws={&quot;color&quot;: &quot;# 7CBC47&quot;,&#10;                                     &quot;alpha&quot;: 0.7, &quot;s&quot;: 30, 'marker': &quot;+&quot;},&#10;                        line_kws={&quot;color&quot;: &quot;# D31A8A&quot;, &quot;alpha&quot;: 1, &quot;lw&quot;: 4},&#10;                        marginal_kws=dict(bins=20, rug=False,&#10;                                          hist_kws={'edgecolor': 'k',&#10;                                                    'color': '# 7CBC47',&#10;                                                    'alpha': 1})  # 设置柱状图箱数，是否设置rug&#10;                        )&#10;sns_reg.set_axis_labels(xlabel='total bill', ylabel='tip')&#10;# sns_reg.savefig('scatter_reg.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;seaborn.axisgrid.JointGrid at 0x1fb18c06be0&amp;gt;&#10;```&#10;" />
    <outline text="(c) 二维与一维统计直方图&#10;" _note="sns_hex = sns.jointplot(x='x', y='y',  # 设置xy轴，显示columns名称&#10;                        data=df,   # 设置数据&#10;                        # 设置散点大小、边缘线颜色及宽度(只针对scatter）&#10;                        kind='hex',  # kind=&quot;kde&quot;,&quot;hex&quot;,&quot;reg&quot;&#10;                        color='# D31A8A', linewidth=0.1,&#10;                        space=0,  # 设置散点图和布局图的间距&#10;                        size=5, ratio=5,  # 散点图与布局图高度比，整型&#10;                        xlim=(0, 60),&#10;                        joint_kws=dict(gridsize=20, edgecolor='w'),  # 主图参数设置&#10;                        marginal_kws=dict(bins=20, color='# D31A8A',&#10;                                          hist_kws={'edgecolor': 'k', 'alpha': 1}),   # 边缘图设置&#10;                        )  # 修改统计注释&#10;sns_hex.set_axis_labels(xlabel='total bill', ylabel='tip')&#10;# sns_hex.savefig('sns_hex.pdf')&#10;&#10;```&#10;```&#10;C:\QMDownload\anaconda\lib\site-packages\seaborn\axisgrid.py:2264: UserWarning: The `size` parameter has been renamed to `height`; please update your code.&#10;&#10;```&#10;" />
    <outline text="(d) 二维与一维核密度估计图&#10;" _note="sns_kde = sns.jointplot(x=&quot;x&quot;, y=&quot;y&quot;, data=df, kind=&quot;kde&quot;, color='# D31A8A')&#10;sns_kde.plot_joint(plt.scatter, c=&quot;k&quot;, s=10, linewidth=1, marker=&quot;+&quot;)&#10;sns_kde.set_axis_labels(xlabel='total bill', ylabel='tip')&#10;# sns_kde.savefig('sns_kde.pdf')&#10;&#10;```&#10;```&#10;&amp;lt;seaborn.axisgrid.JointGrid at 0x1fb19d41a00&amp;gt;&#10;```&#10;" />
    <outline text="(e)二维散点与一维核密度估计图&#10;" _note="g = sns.JointGrid(x=&quot;total_bill&quot;, y=&quot;tip&quot;, data=tips, size=5, ratio=5)&#10;g = g.plot_joint(plt.scatter,&#10;                 color=&quot;# 00B1B8&quot;, s=40, edgecolor=&quot;black&quot;, linewidth=0.2)&#10;g = g.plot_marginals(sns.kdeplot, shade=True, color=&quot;# 00B1B8&quot;)&#10;g = g.annotate(stats.pearsonr, loc=&quot;upper left&quot;, fontsize=12)&#10;def rsquare(a, b): return stats.pearsonr(a, b)[0] ** 2&#10;&#10;g = g.annotate(rsquare, template=&quot;{stat}: {val:.2f}&quot;,&#10;               stat=&quot;$R^2$&quot;, loc=&quot;upper left&quot;, fontsize=15)&#10;g.set_axis_labels(xlabel='total bill', ylabel='tip')&#10;# g.savefig('sns_kde_scatter.pdf')&#10;&#10;```&#10;```&#10;C:\QMDownload\anaconda\lib\site-packages\seaborn\axisgrid.py:1665: UserWarning: The `size` parameter has been renamed to `height`; please update your code.&#10;C:\QMDownload\anaconda\lib\site-packages\seaborn\axisgrid.py:1840: UserWarning: JointGrid annotation is deprecated and will be removed in a future release.&#10;C:\QMDownload\anaconda\lib\site-packages\seaborn\axisgrid.py:1840: UserWarning: JointGrid annotation is deprecated and will be removed in a future release.&#10;&#10;```&#10;&#10;" />
    </outline>
  </outline>
  </body>
</opml>