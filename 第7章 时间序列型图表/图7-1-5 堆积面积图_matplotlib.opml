<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图7-1-5 堆积面积图_matplotlib&#10;" _note="import seaborn as sns&#10;import pandas as pd&#10;import matplotlib.pyplot as plt&#10;from datetime import datetime&#10;&#10;&#10;df = pd.read_csv('StackedArea_Data.csv', index_col=0)&#10;df.index = [datetime.strptime(d, '%Y/%m/%d').date() for d in df.index]&#10;&#10;Sum_df = df.apply(lambda x: x.sum(), axis=0).sort_values(ascending=False)&#10;&#10;df = df[Sum_df.index]&#10;df&#10;&#10;```&#10;```&#10;            North_America  Europe  Asia  South_America  Africa&#10;2002-06-30           23.0     9.3  13.2            7.9     7.9&#10;2002-07-30           19.9     8.5  12.5            7.1     7.5&#10;2002-08-30           21.0     8.0  12.5            7.6     7.9&#10;2002-09-30           22.1     8.2  13.9            8.3     5.9&#10;2002-10-30           25.1    10.7  14.4            9.4     6.1&#10;...                   ...     ...   ...            ...     ...&#10;2011-08-30           31.6    48.6  16.0           24.8     0.0&#10;2011-09-30           31.5    42.8  15.4           18.4     4.5&#10;2011-10-30           26.7    35.6  12.6           15.3     3.6&#10;2011-11-30           27.3    35.3  13.0           15.0     3.9&#10;2011-12-30           20.2    31.6  15.8           16.1     5.5&#10;&#10;[115 rows x 5 columns]&#10;```&#10;">
    <outline text="(a) 堆积面积图&#10;" _note="# from matplotlib.ticker import FormatDateFormatter&#10;&#10;&#10;columns = df.columns&#10;&#10;colors = sns.husl_palette(len(columns), h=15/360, l=.65, s=1).as_hex()&#10;&#10;fig = plt.figure(figsize=(5, 4), dpi=100)&#10;plt.stackplot(df.index.values,&#10;              df.values.T, alpha=1, labels=columns, linewidth=1, edgecolor='k', colors=colors)&#10;&#10;plt.xlabel(&quot;Year&quot;)&#10;plt.ylabel(&quot;Value&quot;)&#10;plt.legend(title=&quot;group&quot;, loc=&quot;center right&quot;, bbox_to_anchor=(&#10;    1.5, 0, 0, 1), edgecolor='none', facecolor='none')&#10;# plt.gca().xaxis.set_major_formatter(FormatDateFormatter('%Y'))&#10;# ax=plt.gca()&#10;# ax.xaxis.set_major_locator(mdates.MonthLocator(interval=24))&#10;plt.show()&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x400 with 1 Axes&amp;gt;&#10;```&#10;" />
    <outline text="(b)百分比堆积面积图&#10;" _note="df = pd.read_csv('StackedArea_Data.csv', index_col=0)&#10;df.index = [datetime.strptime(d, '%Y/%m/%d').date() for d in df.index]&#10;SumRow_df = df.apply(lambda x: x.sum(), axis=1)&#10;df = df.apply(lambda x: x/SumRow_df, axis=0)&#10;meanCol_df = df.apply(lambda x: x.mean(), axis=0).sort_values(ascending=False)&#10;df = df[meanCol_df.index]&#10;columns = df.columns&#10;&#10;colors = sns.husl_palette(len(columns), h=15/360, l=.65, s=1).as_hex()&#10;&#10;fig = plt.figure(figsize=(5, 4), dpi=100)&#10;plt.stackplot(df.index.values, df.values.T, labels=columns, colors=colors,&#10;              linewidth=1, edgecolor='k')&#10;&#10;plt.xlabel(&quot;Year&quot;)&#10;plt.ylabel(&quot;Value&quot;)&#10;plt.gca().set_yticklabels(['{:.0f}%'.format(x*100)&#10;                           for x in plt.gca().get_yticks()])&#10;plt.legend(title=&quot;group&quot;, loc=&quot;center right&quot;, bbox_to_anchor=(&#10;    1.5, 0, 0, 1), edgecolor='none', facecolor='none')&#10;&#10;plt.show()&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x400 with 1 Axes&amp;gt;&#10;```&#10;&#10;" />
    </outline>
  </outline>
  </body>
</opml>