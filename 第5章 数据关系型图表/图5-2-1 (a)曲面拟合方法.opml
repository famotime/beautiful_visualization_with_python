<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图5-2-1 (a)曲面拟合方法&#10;" _note="from statsmodels.formula.api import ols&#10;import pandas as pd&#10;from mpl_toolkits import mplot3d&#10;import numpy as np&#10;import matplotlib.pyplot as plt&#10;import matplotlib as mpl&#10;&#10;&#10;df = pd.read_csv('Surface_Data.csv')&#10;df&#10;&#10;```&#10;```&#10;      x   y    z&#10;0    14  11  132&#10;1    12  11  154&#10;2    13  10  158&#10;3    10  12  132&#10;4    12  12  121&#10;..   ..  ..  ...&#10;335  14  35   38&#10;336  17  35   54&#10;337  12  35   38&#10;338  15  36   49&#10;339  19  35   52&#10;&#10;[340 rows x 3 columns]&#10;```&#10;&#10;```python&#10;# 多项式拟合z=f(x, y)=a+bx+cy+dx2+ey2&#10;formula = 'z~x+y'&#10;est = ols(formula, data=df).fit()&#10;print(est.summary())&#10;&#10;N = 30&#10;xmar = np.linspace(min(df.x), max(df.x), N)&#10;ymar = np.linspace(min(df.y), max(df.y), N)&#10;X, Y = np.meshgrid(xmar, ymar)&#10;df_grid = pd.DataFrame({'x': X.flatten(), 'y': Y.flatten()})&#10;&#10;Z = est.predict(df_grid)&#10;&#10;fig = plt.figure(figsize=(10, 8), dpi=90)&#10;ax = fig.gca(projection='3d')&#10;# ax.set_aspect('equal','box')&#10;ax.view_init(azim=60, elev=20)&#10;# 改变绘制图像的视角,即相机的位置,azim沿着z轴旋转，elev沿着y轴&#10;# --------------------------------------------------------------------------------------&#10;ax.grid(False)&#10;&#10;ax.xaxis._axinfo['tick']['outward_factor'] = 0&#10;ax.xaxis._axinfo['tick']['inward_factor'] = 0.4&#10;ax.yaxis._axinfo['tick']['outward_factor'] = 0&#10;ax.yaxis._axinfo['tick']['inward_factor'] = 0.4&#10;ax.zaxis._axinfo['tick']['outward_factor'] = 0&#10;ax.zaxis._axinfo['tick']['inward_factor'] = 0.4&#10;# =============================================================================&#10;ax.xaxis.pane.fill = False&#10;ax.yaxis.pane.fill = False&#10;ax.zaxis.pane.fill = False&#10;# =============================================================================&#10;&#10;ax.xaxis.pane.set_edgecolor('k')&#10;ax.yaxis.pane.set_edgecolor('k')&#10;ax.zaxis.pane.set_edgecolor('k')&#10;&#10;p = ax.plot_surface(X, Y, Z.values.reshape(N, N), rstride=1, cstride=1, cmap='Spectral_r',&#10;                    alpha=1, edgecolor='k', linewidth=0.25)&#10;&#10;ax.set_xlabel(&quot;Gax Mileage (mpg)&quot;)&#10;ax.set_ylabel(&quot;0-60 mph (sec)&quot;)&#10;ax.set_zlabel(&quot;Power (KW)&quot;)&#10;ax.set_zlim(20, 140)&#10;&#10;&#10;cbar = fig.colorbar(p, shrink=0.5, aspect=10)&#10;cbar.set_label('Power (kW)')&#10;# fig.savefig('三维曲面图3.pdf')&#10;&#10;```&#10;```&#10;                            OLS Regression Results                            &#10;==============================================================================&#10;Dep. Variable:                      z   R-squared:                       0.614&#10;Model:                            OLS   Adj. R-squared:                  0.611&#10;Method:                 Least Squares   F-statistic:                     267.7&#10;Date:                Sat, 10 Apr 2021   Prob (F-statistic):           2.44e-70&#10;Time:                        16:56:24   Log-Likelihood:                -1454.1&#10;No. Observations:                 340   AIC:                             2914.&#10;Df Residuals:                     337   BIC:                             2926.&#10;Df Model:                           2                                         &#10;Covariance Type:            nonrobust                                         &#10;==============================================================================&#10;                 coef    std err          t      P&amp;gt;|t|      [0.025      0.975]&#10;------------------------------------------------------------------------------&#10;Intercept    164.2697      5.318     30.888      0.000     153.809     174.731&#10;x             -0.2658      0.314     -0.846      0.398      -0.884       0.352&#10;y             -3.6913      0.168    -21.974      0.000      -4.022      -3.361&#10;==============================================================================&#10;Omnibus:                       34.307   Durbin-Watson:                   1.457&#10;Prob(Omnibus):                  0.000   Jarque-Bera (JB):               55.148&#10;Skew:                           0.637   Prob(JB):                     1.06e-12&#10;Kurtosis:                       4.507   Cond. No.                         153.&#10;==============================================================================&#10;&#10;Warnings:&#10;[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#10;&#10;```&#10;&#10;```python&#10;# -------------------------等高线图---------------------------------------------------&#10;&#10;fig, ax = plt.subplots(figsize=(5, 4), dpi=90)&#10;&#10;CS = ax.contour(X, Y, Z.values.reshape(N, N),&#10;                levels=10, linewidths=0.5, colors='k')&#10;cntr = ax.contourf(X, Y, Z.values.reshape(N, N), levels=10, cmap=&quot;Spectral_r&quot;)&#10;# scat=ax.scatter(df.x, df.y,c=df.z,s=40, linewidths=0.5, edgecolors=&quot;k&quot;,alpha=0.8)&#10;ax.set_xlabel(&quot;Gax Mileage (mpg)&quot;)&#10;ax.set_ylabel(&quot;0-60 mph (sec)&quot;)&#10;&#10;fig.colorbar(cntr, ax=ax, label=&quot;Power (KW)&quot;)&#10;CS.levels = [int(val) for val in cntr.levels]&#10;ax.clabel(CS, CS.levels, fmt='%.0f', inline=True,  fontsize=10)&#10;&#10;```&#10;```&#10;&amp;lt;a list of 10 text.Text objects&amp;gt;&#10;```&#10;&#10;" />
  </outline>
  </body>
</opml>