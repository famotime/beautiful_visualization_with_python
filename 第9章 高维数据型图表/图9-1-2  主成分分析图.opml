<?xml version='1.0'?>
<opml version='2.0'>
  <head>
    <ownerEmail>
      quincy.zou@gmail.com
    </ownerEmail>
  </head>
  <body>
  <outline text="图9-1-2  主成分分析图&#10;">
    <outline text="(a) 四维数据的iris数据集&#10;" _note="import pandas as pd&#10;import numpy as np&#10;from plotnine import *&#10;from sklearn.decomposition import PCA&#10;from sklearn import datasets&#10;&#10;&#10;iris = datasets.load_iris()&#10;&#10;X_reduced = PCA(n_components=2).fit_transform(iris.data)&#10;target = pd.Categorical.from_codes(iris.target, iris.target_names)&#10;&#10;df = pd.DataFrame(&#10;    dict(pca1=X_reduced[:, 0], pca2=X_reduced[:, 1], target=target))&#10;df&#10;&#10;```&#10;```&#10;         pca1      pca2     target&#10;0   -2.684126  0.319397     setosa&#10;1   -2.714142 -0.177001     setosa&#10;2   -2.888991 -0.144949     setosa&#10;3   -2.745343 -0.318299     setosa&#10;4   -2.728717  0.326755     setosa&#10;..        ...       ...        ...&#10;145  1.944110  0.187532  virginica&#10;146  1.527167 -0.375317  virginica&#10;147  1.764346  0.078859  virginica&#10;148  1.900942  0.116628  virginica&#10;149  1.390189 -0.282661  virginica&#10;&#10;[150 rows x 3 columns]&#10;```&#10;&#10;```python&#10;base_plot2 = (ggplot(df, aes('pca1', 'pca2', fill='factor(target)')) +&#10;              geom_point(alpha=1, size=3, shape='o', colour='k') +&#10;              # ç»å¶éæåº¦ä¸º0.2 çæ£ç¹å¾&#10;              stat_ellipse(geom=&quot;polygon&quot;, level=0.95, alpha=0.2) +&#10;              # ç»å¶æ¤­åæ å®ä¸åç±»å«&#10;              scale_fill_manual(values=(&quot;# 00AFBB&quot;, &quot;# E7B800&quot;, &quot;# FC4E07&quot;), name='group') +&#10;              theme(&#10;    axis_title=element_text(size=15, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    axis_text=element_text(size=13, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    legend_text=element_text(size=11, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    aspect_ratio=1,&#10;    figure_size=(5, 5),&#10;    dpi=100&#10;)&#10;)&#10;print(base_plot2)&#10;&#10;```&#10;```&#10;&amp;lt;Figure size 500x503.247 with 1 Axes&amp;gt;&#10;```&#10;" />
    <outline text="(b) 93维数据的train数据集&#10;" _note="df = pd.read_csv('Tsne_Data.csv')&#10;df = df.set_index('id')&#10;&#10;num_rows_sample = 5000&#10;&#10;df = df.sample(n=num_rows_sample)&#10;&#10;X_reduced = PCA(n_components=2).fit_transform(df.iloc[:, :-1])&#10;&#10;df = pd.DataFrame(&#10;    dict(pca1=X_reduced[:, 0], pca2=X_reduced[:, 1], target=df.iloc[:, -1]))&#10;df&#10;&#10;```&#10;```&#10;            pca1       pca2   target&#10;id                                  &#10;846    24.002362 -14.448084  Class_1&#10;60850  -0.344479  -2.741521  Class_9&#10;35641  -2.218248  10.447094  Class_6&#10;12083  -3.393735  -1.514022  Class_2&#10;45596  -0.534955  -1.493356  Class_6&#10;...          ...        ...      ...&#10;15695  -3.877077  -1.913098  Class_2&#10;55222  14.350543  -0.515234  Class_8&#10;50570  -0.197305  48.094926  Class_8&#10;52869  14.593237   1.606615  Class_8&#10;24473  -4.235529  -1.646510  Class_3&#10;&#10;[5000 rows x 3 columns]&#10;```&#10;&#10;```python&#10;base_plot2 = (ggplot(df, aes('pca1', 'pca2', fill='target', color='target')) +&#10;              geom_point(alpha=1, size=2, shape='o', colour='k', stroke=0.1) +&#10;              stat_ellipse(geom=&quot;polygon&quot;, level=0.95, alpha=0.2) +&#10;              xlim(-15, 25) +&#10;              ylim(-15, 25) +&#10;              scale_fill_hue(s=0.99, l=0.65, h=0.0417, color_space='husl') +&#10;              scale_color_hue(s=0.99, l=0.65, h=0.0417, color_space='husl') +&#10;              theme(&#10;    # text=element_text(size=15,face=&quot;plain&quot;,color=&quot;black&quot;),&#10;    axis_title=element_text(size=15, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    axis_text=element_text(size=13, face=&quot;plain&quot;, color=&quot;black&quot;),&#10;    aspect_ratio=1,&#10;    figure_size=(5, 5),&#10;    dpi=100&#10;)&#10;)&#10;print(base_plot2)&#10;&#10;```&#10;```&#10;C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:372: PlotnineWarning: stat_ellipse : Removed 129 rows containing non-finite values.&#10;C:\QMDownload\anaconda\lib\site-packages\plotnine\layer.py:467: PlotnineWarning: geom_point : Removed 129 rows containing missing values.&#10;&#10;```&#10;&#10;" />
    </outline>
  </outline>
  </body>
</opml>